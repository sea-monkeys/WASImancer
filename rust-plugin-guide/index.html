
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="üßôüèª‚Äç‚ôÇÔ∏è WASImancer is a WebAssembly-Powered MCP SSE Server.">
      
      
        <meta name="author" content="Philippe Charri√®re (@k33g)">
      
      
        <link rel="canonical" href="https://sea-monkeys.github.io/wasimancer/rust-plugin-guide/">
      
      
        <link rel="prev" href="../go-plugin-guide/">
      
      
        <link rel="next" href="../plugins-rest-api-guide/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>ü¶Ä Create Rust Plugins - WASImancer</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#creating-rust-plugins-for-wasimancer-a-step-by-step-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="WASImancer" class="md-header__button md-logo" aria-label="WASImancer" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WASImancer
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ü¶Ä Create Rust Plugins
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/sea-monkeys/wasimancer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    sea-monkeys/wasimancer
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="WASImancer" class="md-nav__button md-logo" aria-label="WASImancer" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    WASImancer
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sea-monkeys/wasimancer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    sea-monkeys/wasimancer
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üè† Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../wasm-plugins-concept/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üîå WebAssembly Plugin
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../go-plugin-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üêøÔ∏è Create Go Plugins
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    ü¶Ä Create Rust Plugins
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    ü¶Ä Create Rust Plugins
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Project Setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-rust-project" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the Rust Project
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-project-for-webassembly" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring the Project for WebAssembly
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-the-plugin-code" class="md-nav__link">
    <span class="md-ellipsis">
      Writing the Plugin Code
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing the Plugin Code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-the-code" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the Code
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-the-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Building the Plugin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building the Plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-local-rust" class="md-nav__link">
    <span class="md-ellipsis">
      Using Local Rust
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Using Docker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-the-plugin-locally" class="md-nav__link">
    <span class="md-ellipsis">
      Testing the Plugin Locally
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing the Plugin Locally">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-local-extism-cli" class="md-nav__link">
    <span class="md-ellipsis">
      Using Local Extism CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-docker_1" class="md-nav__link">
    <span class="md-ellipsis">
      Using Docker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-plugin-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the Plugin Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-the-plugin-to-wasimancer" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying the Plugin to WASImancer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploying the Plugin to WASImancer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#method-1-manual-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Method 1: Manual Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-2-using-the-upload-api" class="md-nav__link">
    <span class="md-ellipsis">
      Method 2: Using the Upload API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-the-plugin-in-wasimancer" class="md-nav__link">
    <span class="md-ellipsis">
      Testing the Plugin in WASImancer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging-tips-for-rust-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging Tips for Rust Plugins
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices-for-rust-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices for Rust Plugins
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-script-for-convenience" class="md-nav__link">
    <span class="md-ellipsis">
      Build Script for Convenience
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins-rest-api-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üåê Plugins REST API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üì¶ Resources
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dynamic-resources-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üì¶ Dynamic Resources
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources-rest-api-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üì¶ Resources REST API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../prompts-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üó£Ô∏è Prompts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../test-with-curl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ‚úÖ Testing Guide with curl
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../langchainjs-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üìí StreamableHTTP Client and LangchainJS
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Project Setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-rust-project" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the Rust Project
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-project-for-webassembly" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring the Project for WebAssembly
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-the-plugin-code" class="md-nav__link">
    <span class="md-ellipsis">
      Writing the Plugin Code
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing the Plugin Code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-the-code" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the Code
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-the-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Building the Plugin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building the Plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-local-rust" class="md-nav__link">
    <span class="md-ellipsis">
      Using Local Rust
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Using Docker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-the-plugin-locally" class="md-nav__link">
    <span class="md-ellipsis">
      Testing the Plugin Locally
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing the Plugin Locally">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-local-extism-cli" class="md-nav__link">
    <span class="md-ellipsis">
      Using Local Extism CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-docker_1" class="md-nav__link">
    <span class="md-ellipsis">
      Using Docker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-plugin-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the Plugin Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-the-plugin-to-wasimancer" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying the Plugin to WASImancer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploying the Plugin to WASImancer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#method-1-manual-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Method 1: Manual Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-2-using-the-upload-api" class="md-nav__link">
    <span class="md-ellipsis">
      Method 2: Using the Upload API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-the-plugin-in-wasimancer" class="md-nav__link">
    <span class="md-ellipsis">
      Testing the Plugin in WASImancer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging-tips-for-rust-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging Tips for Rust Plugins
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices-for-rust-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices for Rust Plugins
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-script-for-convenience" class="md-nav__link">
    <span class="md-ellipsis">
      Build Script for Convenience
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="creating-rust-plugins-for-wasimancer-a-step-by-step-guide">Creating Rust Plugins for WASImancer: A Step-by-Step Guide</h1>
<div class="admonition info">
<p class="admonition-title">üöß work in progress</p>
</div>
<p>This guide will walk you through the process of creating, building, and running a WebAssembly plugin for WASImancer using Rust. We'll create a simple calculator plugin that can add two numbers.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>To follow this guide, you'll need:</p>
<ul>
<li><a href="https://www.rust-lang.org/tools/install">Rust</a> and Cargo installed</li>
<li><a href="https://rustwasm.github.io/docs/book/game-of-life/setup.html">wasm32-unknown-unknown target</a> for WebAssembly compilation</li>
<li><a href="https://github.com/extism/cli">Extism CLI</a> for testing</li>
</ul>
<p>Alternatively, you can use the Docker image provided by WASImancer:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>docker<span class="w"> </span>pull<span class="w"> </span>k33g/wasm-builder:0.0.7
</code></pre></div></td></tr></table></div></p>
<h2 id="project-setup">Project Setup</h2>
<p>Let's create a new Rust library project:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>addition
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nb">cd</span><span class="w"> </span>addition
</code></pre></div></td></tr></table></div>
<h2 id="creating-the-rust-project">Creating the Rust Project</h2>
<p>Initialize a new Rust library project:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a>cargo<span class="w"> </span>init<span class="w"> </span>--lib
</code></pre></div></td></tr></table></div>
<h2 id="configuring-the-project-for-webassembly">Configuring the Project for WebAssembly</h2>
<p>First, edit the <code>Cargo.toml</code> file to set up your project for WebAssembly compilation:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">[package]</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;wasimancer-plugin-addition&quot;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="n">edition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;2021&quot;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="k">[lib]</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="n">crate-type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;cdylib&quot;</span><span class="p">]</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="k">[dependencies]</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="n">extism-pdk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.3.0&quot;</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="n">serde</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;derive&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Key points about this configuration:
- <code>crate-type = ["cdylib"]</code> specifies that we're building a dynamic library suitable for WebAssembly
- <code>extism-pdk</code> is the Extism Plugin Development Kit for Rust
- <code>serde</code> is used for serializing and deserializing JSON data</p>
<p>Next, create a <code>.cargo/config.toml</code> file to set the default target:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">[build]</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;wasm32-unknown-unknown&quot;</span>
</code></pre></div></td></tr></table></div>
<h2 id="writing-the-plugin-code">Writing the Plugin Code</h2>
<p>Replace the contents of <code>src/lib.rs</code> with the following code:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">use</span><span class="w"> </span><span class="n">extism_pdk</span><span class="p">::</span><span class="o">*</span><span class="p">;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="k">use</span><span class="w"> </span><span class="n">serde</span><span class="p">::{</span><span class="n">Deserialize</span><span class="p">,</span><span class="w"> </span><span class="n">Serialize</span><span class="p">};</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="c1">// Define input structure for addition</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="cp">#[derive(FromBytes, Deserialize, PartialEq, Debug)]</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="cp">#[encoding(Json)]</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Add</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span><span class="n">left</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="p">,</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">    </span><span class="n">right</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="p">,</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="p">}</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="c1">// Define output structure for the sum</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="cp">#[derive(ToBytes, Serialize, PartialEq, Debug)]</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="cp">#[encoding(Json)]</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Sum</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="w">    </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="p">,</span>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="p">}</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="cp">#[plugin_fn]</span>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="nc">Add</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">FnResult</span><span class="o">&lt;</span><span class="n">Sum</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a><span class="w">    </span><span class="c1">// Add the two numbers and return the result</span>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">Sum</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a><span class="w">        </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="nc">input</span><span class="p">.</span><span class="n">left</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">right</span><span class="p">,</span>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="w">    </span><span class="p">})</span>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="understanding-the-code">Understanding the Code</h3>
<ol>
<li>
<p>We import the necessary components from <code>extism_pdk</code> and <code>serde</code> to handle WebAssembly interaction and JSON serialization.</p>
</li>
<li>
<p>We define two structs:</p>
</li>
<li><code>Add</code>: Represents the input with two integers (<code>left</code> and <code>right</code>)</li>
<li>
<p><code>Sum</code>: Represents the output with a single integer (<code>value</code>)</p>
</li>
<li>
<p>The <code>#[plugin_fn]</code> macro marks our <code>add</code> function as an exported plugin function.</p>
</li>
<li>
<p>The <code>add</code> function takes an <code>Add</code> input, performs the addition, and returns a <code>Sum</code> result wrapped in <code>FnResult</code>.</p>
</li>
<li>
<p>Both structs use the <code>#[encoding(Json)]</code> attribute to specify that they should be encoded/decoded as JSON.</p>
</li>
</ol>
<h2 id="building-the-plugin">Building the Plugin</h2>
<h3 id="using-local-rust">Using Local Rust</h3>
<p>To compile your Rust code to WebAssembly:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>cargo<span class="w"> </span>build<span class="w"> </span>--release
</code></pre></div></td></tr></table></div>
<p>The compiled WebAssembly file will be located at <code>target/wasm32-unknown-unknown/release/wasimancer_plugin_addition.wasm</code>.</p>
<p>Copy it to your project directory:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a>cp<span class="w"> </span>target/wasm32-unknown-unknown/release/wasimancer_plugin_addition.wasm<span class="w"> </span>./
</code></pre></div></td></tr></table></div>
<h3 id="using-docker">Using Docker</h3>
<p>If you're using the WASImancer's Docker image:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span>
<span class="normal"><a href="#__codelineno-8-6">6</a></span>
<span class="normal"><a href="#__codelineno-8-7">7</a></span>
<span class="normal"><a href="#__codelineno-8-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PWD</span><span class="s2">&quot;</span>:/addition<span class="w"> </span>-w<span class="w"> </span>/addition<span class="w"> </span>k33g/wasm-builder:0.0.7<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">  </span>bash<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="s2">    cargo clean &amp;&amp; \</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="s2">    cargo install cargo-cache &amp;&amp; \</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="s2">    cargo cache -a &amp;&amp; \</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="s2">    cargo build --release &amp;&amp; \</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="s2">    cp target/wasm32-unknown-unknown/release/wasimancer_plugin_addition.wasm ./</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="s2">  &quot;</span>
</code></pre></div></td></tr></table></div>
<h2 id="testing-the-plugin-locally">Testing the Plugin Locally</h2>
<p>You can test your plugin using the Extism CLI before deploying it to WASImancer:</p>
<h3 id="using-local-extism-cli">Using Local Extism CLI</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span>
<span class="normal"><a href="#__codelineno-9-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a>extism<span class="w"> </span>call<span class="w"> </span>wasimancer_plugin_addition.wasm<span class="w"> </span>add<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">  </span>--input<span class="w"> </span><span class="s1">&#39;{&quot;left&quot;:30, &quot;right&quot;:12}&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">  </span>--log-level<span class="w"> </span><span class="s2">&quot;info&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">  </span>--wasi
</code></pre></div></td></tr></table></div>
<h3 id="using-docker_1">Using Docker</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span>
<span class="normal"><a href="#__codelineno-10-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PWD</span><span class="s2">&quot;</span>:/addition<span class="w"> </span>-w<span class="w"> </span>/addition<span class="w"> </span>k33g/wasm-builder:0.0.7<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">  </span>extism<span class="w"> </span>call<span class="w"> </span>wasimancer_plugin_addition.wasm<span class="w"> </span>add<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">  </span>--input<span class="w"> </span><span class="s1">&#39;{&quot;left&quot;:30, &quot;right&quot;:12}&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">  </span>--log-level<span class="w"> </span><span class="s2">&quot;info&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">  </span>--wasi
</code></pre></div></td></tr></table></div>
<p>You should see output like: <code>{"value":42}</code>, indicating that the addition function correctly added 30 and 12.</p>
<h2 id="creating-the-plugin-configuration">Creating the Plugin Configuration</h2>
<p>To use your plugin with WASImancer, you need to create a configuration in the <code>plugins.yml</code> file. Add the following entry:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span>
<span class="normal"><a href="#__codelineno-11-15">15</a></span>
<span class="normal"><a href="#__codelineno-11-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="nt">plugins</span><span class="p">:</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">addition</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/addition/wasimancer_plugin_addition.wasm</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">addition</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">    </span><span class="nt">functions</span><span class="p">:</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">add with rust</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">        </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">add</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">        </span><span class="nt">arguments</span><span class="p">:</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">left</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">first number</span>
<a id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">right</span>
<a id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span>
<a id="__codelineno-11-15" name="__codelineno-11-15"></a><span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">second number</span>
<a id="__codelineno-11-16" name="__codelineno-11-16"></a><span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a function to add numbers</span>
</code></pre></div></td></tr></table></div>
<h2 id="deploying-the-plugin-to-wasimancer">Deploying the Plugin to WASImancer</h2>
<h3 id="method-1-manual-deployment">Method 1: Manual Deployment</h3>
<ol>
<li>
<p>Copy your WebAssembly file to the WASImancer plugins directory:
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>cp<span class="w"> </span>wasimancer_plugin_addition.wasm<span class="w"> </span>/path/to/wasimancer/plugins/addition/
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>Restart WASImancer or use the hot-reload API (next method).</p>
</li>
</ol>
<h3 id="method-2-using-the-upload-api">Method 2: Using the Upload API</h3>
<p>You can use the WASImancer API to upload your plugin without restarting the server:</p>
<ol>
<li>Create a shell script named <code>publish.sh</code> with the following content:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span>
<span class="normal"><a href="#__codelineno-13-20">20</a></span>
<span class="normal"><a href="#__codelineno-13-21">21</a></span>
<span class="normal"><a href="#__codelineno-13-22">22</a></span>
<span class="normal"><a href="#__codelineno-13-23">23</a></span>
<span class="normal"><a href="#__codelineno-13-24">24</a></span>
<span class="normal"><a href="#__codelineno-13-25">25</a></span>
<span class="normal"><a href="#__codelineno-13-26">26</a></span>
<span class="normal"><a href="#__codelineno-13-27">27</a></span>
<span class="normal"><a href="#__codelineno-13-28">28</a></span>
<span class="normal"><a href="#__codelineno-13-29">29</a></span>
<span class="normal"><a href="#__codelineno-13-30">30</a></span>
<span class="normal"><a href="#__codelineno-13-31">31</a></span>
<span class="normal"><a href="#__codelineno-13-32">32</a></span>
<span class="normal"><a href="#__codelineno-13-33">33</a></span>
<span class="normal"><a href="#__codelineno-13-34">34</a></span>
<span class="normal"><a href="#__codelineno-13-35">35</a></span>
<span class="normal"><a href="#__codelineno-13-36">36</a></span>
<span class="normal"><a href="#__codelineno-13-37">37</a></span>
<span class="normal"><a href="#__codelineno-13-38">38</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="nv">TOKEN</span><span class="o">=</span><span class="s2">&quot;wasimancer-rocks&quot;</span><span class="w">  </span><span class="c1"># Use your configured token</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="nv">UPLOAD_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;http://localhost:3001/upload-plugin&quot;</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="nv">WASM_FILE</span><span class="o">=</span><span class="s2">&quot;./wasimancer_plugin_addition.wasm&quot;</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="nb">read</span><span class="w"> </span>-r<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>DATA<span class="w"> </span><span class="s">&lt;&lt;- EOM</span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="s">{</span>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="s">  &quot;name&quot;: &quot;addition&quot;,</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="s">  &quot;path&quot;: &quot;./bucket/wasimancer_plugin_addition.wasm&quot;,</span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="s">  &quot;version&quot;: &quot;1.0.0&quot;,</span>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="s">  &quot;description&quot;: &quot;addition&quot;,</span>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="s">  &quot;functions&quot;: [</span>
<a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="s">    {</span>
<a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="s">      &quot;displayName&quot;: &quot;add with rust&quot;,</span>
<a id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="s">      &quot;function&quot;: &quot;add&quot;,</span>
<a id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="s">      &quot;arguments&quot;: [</span>
<a id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="s">        {</span>
<a id="__codelineno-13-19" name="__codelineno-13-19"></a><span class="s">          &quot;name&quot;: &quot;left&quot;,</span>
<a id="__codelineno-13-20" name="__codelineno-13-20"></a><span class="s">          &quot;type&quot;: &quot;number&quot;,</span>
<a id="__codelineno-13-21" name="__codelineno-13-21"></a><span class="s">          &quot;description&quot;: &quot;first number&quot;</span>
<a id="__codelineno-13-22" name="__codelineno-13-22"></a><span class="s">        },</span>
<a id="__codelineno-13-23" name="__codelineno-13-23"></a><span class="s">        {</span>
<a id="__codelineno-13-24" name="__codelineno-13-24"></a><span class="s">          &quot;name&quot;: &quot;right&quot;,</span>
<a id="__codelineno-13-25" name="__codelineno-13-25"></a><span class="s">          &quot;type&quot;: &quot;number&quot;,</span>
<a id="__codelineno-13-26" name="__codelineno-13-26"></a><span class="s">          &quot;description&quot;: &quot;second number&quot;</span>
<a id="__codelineno-13-27" name="__codelineno-13-27"></a><span class="s">        }</span>
<a id="__codelineno-13-28" name="__codelineno-13-28"></a><span class="s">      ],</span>
<a id="__codelineno-13-29" name="__codelineno-13-29"></a><span class="s">      &quot;description&quot;: &quot;a function to add numbers&quot;</span>
<a id="__codelineno-13-30" name="__codelineno-13-30"></a><span class="s">    }</span>
<a id="__codelineno-13-31" name="__codelineno-13-31"></a><span class="s">  ]</span>
<a id="__codelineno-13-32" name="__codelineno-13-32"></a><span class="s">}</span>
<a id="__codelineno-13-33" name="__codelineno-13-33"></a><span class="s">EOM</span>
<a id="__codelineno-13-34" name="__codelineno-13-34"></a>
<a id="__codelineno-13-35" name="__codelineno-13-35"></a>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="si">${</span><span class="nv">UPLOAD_ENDPOINT</span><span class="si">}</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-36" name="__codelineno-13-36"></a><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="si">${</span><span class="nv">TOKEN</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-37" name="__codelineno-13-37"></a><span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;wasmFile=@</span><span class="si">${</span><span class="nv">WASM_FILE</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-38" name="__codelineno-13-38"></a><span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;pluginData=</span><span class="si">${</span><span class="nv">DATA</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Make the script executable and run it:
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a>chmod<span class="w"> </span>+x<span class="w"> </span>publish.sh
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>./publish.sh
</code></pre></div></td></tr></table></div></li>
</ol>
<h2 id="testing-the-plugin-in-wasimancer">Testing the Plugin in WASImancer</h2>
<p>You can test your deployed plugin using the MCP Inspector:</p>
<ol>
<li>
<p>Start the Inspector:
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a>npx<span class="w"> </span>@modelcontextprotocol/inspector
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>Connect to your WASImancer instance (typically at <code>http://localhost:3001/sse</code>).</p>
</li>
<li>
<p>Navigate to the "Tools" tab, find your plugin, and click "Run Tool".</p>
</li>
</ol>
<!--
## Creating a More Complex Plugin

Let's create a more sophisticated plugin that can perform multiple arithmetic operations. Create a new project:

<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>calculator
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="nb">cd</span><span class="w"> </span>calculator
<a id="__codelineno-16-3" name="__codelineno-16-3"></a>cargo<span class="w"> </span>init<span class="w"> </span>--lib
</code></pre></div></td></tr></table></div>

Edit the `Cargo.toml` file as before, but with a different package name:

<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">[package]</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;wasimancer-plugin-calculator&quot;</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="n">edition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;2021&quot;</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="k">[lib]</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="n">crate-type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;cdylib&quot;</span><span class="p">]</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="k">[dependencies]</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="n">extism-pdk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.3.0&quot;</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="n">serde</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;derive&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>

Create the `.cargo/config.toml` file:

<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">[build]</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;wasm32-unknown-unknown&quot;</span>
</code></pre></div></td></tr></table></div>

Now, create a more complex plugin in `src/lib.rs`:

<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span>
<span class="normal"><a href="#__codelineno-19-16">16</a></span>
<span class="normal"><a href="#__codelineno-19-17">17</a></span>
<span class="normal"><a href="#__codelineno-19-18">18</a></span>
<span class="normal"><a href="#__codelineno-19-19">19</a></span>
<span class="normal"><a href="#__codelineno-19-20">20</a></span>
<span class="normal"><a href="#__codelineno-19-21">21</a></span>
<span class="normal"><a href="#__codelineno-19-22">22</a></span>
<span class="normal"><a href="#__codelineno-19-23">23</a></span>
<span class="normal"><a href="#__codelineno-19-24">24</a></span>
<span class="normal"><a href="#__codelineno-19-25">25</a></span>
<span class="normal"><a href="#__codelineno-19-26">26</a></span>
<span class="normal"><a href="#__codelineno-19-27">27</a></span>
<span class="normal"><a href="#__codelineno-19-28">28</a></span>
<span class="normal"><a href="#__codelineno-19-29">29</a></span>
<span class="normal"><a href="#__codelineno-19-30">30</a></span>
<span class="normal"><a href="#__codelineno-19-31">31</a></span>
<span class="normal"><a href="#__codelineno-19-32">32</a></span>
<span class="normal"><a href="#__codelineno-19-33">33</a></span>
<span class="normal"><a href="#__codelineno-19-34">34</a></span>
<span class="normal"><a href="#__codelineno-19-35">35</a></span>
<span class="normal"><a href="#__codelineno-19-36">36</a></span>
<span class="normal"><a href="#__codelineno-19-37">37</a></span>
<span class="normal"><a href="#__codelineno-19-38">38</a></span>
<span class="normal"><a href="#__codelineno-19-39">39</a></span>
<span class="normal"><a href="#__codelineno-19-40">40</a></span>
<span class="normal"><a href="#__codelineno-19-41">41</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="k">use</span><span class="w"> </span><span class="n">extism_pdk</span><span class="p">::</span><span class="o">*</span><span class="p">;</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="k">use</span><span class="w"> </span><span class="n">serde</span><span class="p">::{</span><span class="n">Deserialize</span><span class="p">,</span><span class="w"> </span><span class="n">Serialize</span><span class="p">};</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="c1">// Define input structure for calculator operations</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="cp">#[derive(FromBytes, Deserialize, PartialEq, Debug)]</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="cp">#[encoding(Json)]</span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="k">struct</span><span class="w"> </span><span class="nc">CalcInput</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">    </span><span class="n">operation</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="w">    </span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="kt">f64</span><span class="p">,</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="w">    </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="kt">f64</span><span class="p">,</span>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="p">}</span>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a>
<a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="c1">// Define output structure for the result</span>
<a id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="cp">#[derive(ToBytes, Serialize, PartialEq, Debug)]</span>
<a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="cp">#[encoding(Json)]</span>
<a id="__codelineno-19-16" name="__codelineno-19-16"></a><span class="k">struct</span><span class="w"> </span><span class="nc">CalcResult</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-17" name="__codelineno-19-17"></a><span class="w">    </span><span class="n">result</span><span class="p">:</span><span class="w"> </span><span class="kt">f64</span><span class="p">,</span>
<a id="__codelineno-19-18" name="__codelineno-19-18"></a><span class="w">    </span><span class="n">operation</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
<a id="__codelineno-19-19" name="__codelineno-19-19"></a><span class="p">}</span>
<a id="__codelineno-19-20" name="__codelineno-19-20"></a>
<a id="__codelineno-19-21" name="__codelineno-19-21"></a><span class="cp">#[plugin_fn]</span>
<a id="__codelineno-19-22" name="__codelineno-19-22"></a><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="nc">CalcInput</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">FnResult</span><span class="o">&lt;</span><span class="n">CalcResult</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-23" name="__codelineno-19-23"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">operation</span><span class="p">.</span><span class="n">as_str</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-24" name="__codelineno-19-24"></a><span class="w">        </span><span class="s">&quot;add&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">b</span><span class="p">,</span>
<a id="__codelineno-19-25" name="__codelineno-19-25"></a><span class="w">        </span><span class="s">&quot;subtract&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">b</span><span class="p">,</span>
<a id="__codelineno-19-26" name="__codelineno-19-26"></a><span class="w">        </span><span class="s">&quot;multiply&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">b</span><span class="p">,</span>
<a id="__codelineno-19-27" name="__codelineno-19-27"></a><span class="w">        </span><span class="s">&quot;divide&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-28" name="__codelineno-19-28"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">b</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-29" name="__codelineno-19-29"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">Error</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="s">&quot;Division by zero&quot;</span><span class="p">));</span>
<a id="__codelineno-19-30" name="__codelineno-19-30"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-19-31" name="__codelineno-19-31"></a><span class="w">            </span><span class="n">input</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">b</span>
<a id="__codelineno-19-32" name="__codelineno-19-32"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-19-33" name="__codelineno-19-33"></a><span class="w">        </span><span class="s">&quot;power&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">a</span><span class="p">.</span><span class="n">powf</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">b</span><span class="p">),</span>
<a id="__codelineno-19-34" name="__codelineno-19-34"></a><span class="w">        </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">Error</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="s">&quot;Unknown operation&quot;</span><span class="p">)),</span>
<a id="__codelineno-19-35" name="__codelineno-19-35"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-19-36" name="__codelineno-19-36"></a>
<a id="__codelineno-19-37" name="__codelineno-19-37"></a><span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">CalcResult</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-38" name="__codelineno-19-38"></a><span class="w">        </span><span class="n">result</span><span class="p">,</span>
<a id="__codelineno-19-39" name="__codelineno-19-39"></a><span class="w">        </span><span class="n">operation</span><span class="p">:</span><span class="w"> </span><span class="nc">input</span><span class="p">.</span><span class="n">operation</span><span class="p">,</span>
<a id="__codelineno-19-40" name="__codelineno-19-40"></a><span class="w">    </span><span class="p">})</span>
<a id="__codelineno-19-41" name="__codelineno-19-41"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>

Build this plugin:

<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a>cargo<span class="w"> </span>build<span class="w"> </span>--release
<a id="__codelineno-20-2" name="__codelineno-20-2"></a>cp<span class="w"> </span>target/wasm32-unknown-unknown/release/wasimancer_plugin_calculator.wasm<span class="w"> </span>./
</code></pre></div></td></tr></table></div>

Test it with the Extism CLI:

<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span>
<span class="normal"><a href="#__codelineno-21-3">3</a></span>
<span class="normal"><a href="#__codelineno-21-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a>extism<span class="w"> </span>call<span class="w"> </span>wasimancer_plugin_calculator.wasm<span class="w"> </span>calculate<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">  </span>--input<span class="w"> </span><span class="s1">&#39;{&quot;operation&quot;:&quot;multiply&quot;,&quot;a&quot;:6,&quot;b&quot;:7}&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">  </span>--log-level<span class="w"> </span><span class="s2">&quot;info&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">  </span>--wasi
</code></pre></div></td></tr></table></div>

You should see output like: `{"result":42,"operation":"multiply"}`.

Update your plugin configuration:

<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span>
<span class="normal"><a href="#__codelineno-22-14">14</a></span>
<span class="normal"><a href="#__codelineno-22-15">15</a></span>
<span class="normal"><a href="#__codelineno-22-16">16</a></span>
<span class="normal"><a href="#__codelineno-22-17">17</a></span>
<span class="normal"><a href="#__codelineno-22-18">18</a></span>
<span class="normal"><a href="#__codelineno-22-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="nt">plugins</span><span class="p">:</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">calculator</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/calculator/wasimancer_plugin_calculator.wasm</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">advanced calculator</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">    </span><span class="nt">functions</span><span class="p">:</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">calculate</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="w">        </span><span class="nt">function</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">calculate</span>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">        </span><span class="nt">arguments</span><span class="p">:</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">operation</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one of &#39;add&#39;, &#39;subtract&#39;, &#39;multiply&#39;, &#39;divide&#39;, or &#39;power&#39;</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a><span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">first number</span>
<a id="__codelineno-22-16" name="__codelineno-22-16"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">b</span>
<a id="__codelineno-22-17" name="__codelineno-22-17"></a><span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span>
<a id="__codelineno-22-18" name="__codelineno-22-18"></a><span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">second number</span>
<a id="__codelineno-22-19" name="__codelineno-22-19"></a><span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">perform arithmetic operations</span>
</code></pre></div></td></tr></table></div>

## Error Handling in Rust Plugins

One advantage of using Rust for WebAssembly plugins is its robust error handling. In the calculator example, we returned errors for division by zero and unknown operations:

<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span>
<span class="normal"><a href="#__codelineno-23-3">3</a></span>
<span class="normal"><a href="#__codelineno-23-4">4</a></span>
<span class="normal"><a href="#__codelineno-23-5">5</a></span>
<span class="normal"><a href="#__codelineno-23-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="s">&quot;divide&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">b</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">Error</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="s">&quot;Division by zero&quot;</span><span class="p">));</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="w">    </span><span class="n">input</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">b</span>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="p">},</span>
</code></pre></div></td></tr></table></div>

When an error occurs, Extism will catch it and return it to the host, making it easy to handle errors gracefully in your applications.
-->
<h2 id="debugging-tips-for-rust-plugins">Debugging Tips for Rust Plugins</h2>
<!--
1. **Use the Debug Macro**: Rust's `Debug` trait (which we derived for our structs) helps you print detailed debug information:
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="fm">eprintln!</span><span class="p">(</span><span class="s">&quot;Debug input: {:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
-->
<ol>
<li>
<p><strong>Extism Logging</strong>: The Extism PDK provides logging functions:
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="n">extism_pdk</span><span class="p">::</span><span class="n">log</span><span class="p">::</span><span class="n">info</span><span class="o">!</span><span class="p">(</span><span class="s">&quot;Processing calculation: {} {} {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">operation</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">b</span><span class="p">);</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p><strong>Test with <code>--log-level "debug"</code> or <code>--log-level "trace"</code> flags</strong>: When using the Extism CLI, increase the log level for more details.</p>
</li>
<li>
<p><strong>Validate JSON Parsing</strong>: If you're having issues with JSON parsing, try adding explicit error handling:
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="cp">#[plugin_fn]</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="n">json</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">FnResult</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="w">    </span><span class="c1">// Manual parsing with explicit error handling</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">input</span><span class="p">:</span><span class="w"> </span><span class="nc">CalcInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">serde_json</span><span class="p">::</span><span class="n">from_str</span><span class="p">(</span><span class="o">&amp;</span><span class="n">json</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">val</span><span class="p">,</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="w">        </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">Error</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="fm">format!</span><span class="p">(</span><span class="s">&quot;JSON parse error: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">))),</span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="w">    </span><span class="c1">// Process as before...</span>
<a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
</li>
</ol>
<h2 id="best-practices-for-rust-plugins">Best Practices for Rust Plugins</h2>
<ol>
<li>
<p><strong>Leverage Rust's Type System</strong>: Use Rust's strong type system to prevent bugs and make your code more maintainable.</p>
</li>
<li>
<p><strong>Use <code>Result</code> for Error Handling</strong>: Return meaningful errors rather than panicking, which can cause unexpected behavior in WebAssembly.</p>
</li>
<li>
<p><strong>Keep Dependencies Minimal</strong>: Large dependencies can increase your WebAssembly module size and slow down loading times.</p>
</li>
<li>
<p><strong>Optimize for Size</strong>: Use build flags to optimize for smaller WebAssembly modules:
   <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="k">[profile.release]</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="n">lto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="n">opt-level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;s&#39;</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p><strong>Use Rust's Memory Management</strong>: Take advantage of Rust's ownership model to prevent memory leaks, which is especially important in long-running WebAssembly modules.</p>
</li>
<li>
<p><strong>Document Your Code</strong>: Add thorough documentation comments to make your plugins easier to maintain.</p>
</li>
</ol>
<h2 id="build-script-for-convenience">Build Script for Convenience</h2>
<p>Create a <code>build.sh</code> script to simplify the build process:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span>
<span class="normal"><a href="#__codelineno-28-2">2</a></span>
<span class="normal"><a href="#__codelineno-28-3">3</a></span>
<span class="normal"><a href="#__codelineno-28-4">4</a></span>
<span class="normal"><a href="#__codelineno-28-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a>cargo<span class="w"> </span>clean
<a id="__codelineno-28-3" name="__codelineno-28-3"></a>cargo<span class="w"> </span>build<span class="w"> </span>--release
<a id="__codelineno-28-4" name="__codelineno-28-4"></a>cp<span class="w"> </span>target/wasm32-unknown-unknown/release/wasimancer_plugin_addition.wasm<span class="w"> </span>./
<a id="__codelineno-28-5" name="__codelineno-28-5"></a>ls<span class="w"> </span>-lh<span class="w"> </span>*.wasm
</code></pre></div></td></tr></table></div>
<p>And a <code>run.sh</code> script to test your plugin:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span>
<span class="normal"><a href="#__codelineno-29-2">2</a></span>
<span class="normal"><a href="#__codelineno-29-3">3</a></span>
<span class="normal"><a href="#__codelineno-29-4">4</a></span>
<span class="normal"><a href="#__codelineno-29-5">5</a></span>
<span class="normal"><a href="#__codelineno-29-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a>extism<span class="w"> </span>call<span class="w"> </span>wasimancer_plugin_addition.wasm<span class="w"> </span>add<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">  </span>--input<span class="w"> </span><span class="s1">&#39;{&quot;left&quot;:30, &quot;right&quot;:12}&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">  </span>--log-level<span class="w"> </span><span class="s2">&quot;info&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">  </span>--wasi
<a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
<p>Make them executable:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a>chmod<span class="w"> </span>+x<span class="w"> </span>build.sh<span class="w"> </span>run.sh
</code></pre></div></td></tr></table></div></p>
<h2 id="conclusion">Conclusion</h2>
<p>You've now learned how to create, build, test, and deploy a Rust plugin for WASImancer. Rust's combination of safety, performance, and WebAssembly support makes it an excellent choice for developing WASImancer plugins. By leveraging Rust's rich ecosystem and type system, you can create powerful, secure tools that enhance your AI applications through the Model Context Protocol.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 - 2025 Philippe Charri√®re
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>